@using SE.TruckTicketing.Contracts.Models.Invoices
@using SE.TruckTicketing.Contracts.Lookups
@using SE.Shared.Common.Utilities
@inherits BaseRazorComponent

<RadzenTemplateForm TItem="ReverseInvoiceRequest"
                    Submit="@(_ => HandleSubmit())"
                    Data="@Model"
                    @ref="_form">

    <div class="card">
        <div class="card-body">
            <div class="row mb-3 mt-3">
                <div class="col d-flex flex-column">
                    <RadzenLabel Text="Reason"
                                 Component="ReasonDropDown"
                                 class="required"/>
                    <RadzenDropDown TValue="InvoiceReversalReason"
                                    id="ReasonDropDown"
                                    Name="ReasonDropDown"
                                    @bind-Value="@Model.InvoiceReversalReason"
                                    TextProperty="Value"
                                    ValueProperty="Key"
                                    Placeholder="Select reason..."
                                    Multiple="false"
                                    FilterCaseSensitivity="FilterCaseSensitivity.CaseInsensitive"
                                    Data="@(DataDictionary.For<InvoiceReversalReason>())"
                                    class="w-100"/>
                    <RadzenRequiredValidator Component="ReasonDropDown"
                                             Text="Required"/>
                </div>
                <div class="col d-flex flex-column">
                    <RadzenLabel Text="Include Original Documents"
                                 Component="IncludeOriginalDocumentsSwitch"/>
                    <RadzenSwitch id="IncludeOriginalDocumentsSwitch"
                                  @bind-Value="@Model.IncludeOriginalDocuments"/>
                </div>
                <div class="row mb-3 mt-3">
                    <div class="col d-flex flex-column">
                        <RadzenLabel Text="Description"
                                     Component="DescriptionTextArea"
                                     class="@(InvoiceReversalDescriptionIsRequired ? "required" : "")"/>
                        <RadzenTextBox id="DescriptionTextArea"
                                       Name="DescriptionTextArea"
                                       @bind-Value="@Model.InvoiceReversalDescription"
                                       class="w-100"/>
                        <RadzenRequiredValidator Component="DescriptionTextArea"
                                                 Text="Required"
                                                 Visible="@InvoiceReversalDescriptionIsRequired"/>
                    </div>
                </div>
                <div class="row mt-4 mb-3">
                    <div class="col d-flex justify-content-end">
                        <RadzenButton ButtonStyle="ButtonStyle.Primary"
                                      Text="Reverse"
                                      Disabled="@(Model.InvoiceReversalReason == InvoiceReversalReason.Unspecified)"
                                      class="ml-2"
                                      ButtonType="ButtonType.Submit"
                                      Click="@(_ => CreateNew = false)" />
                        <RadzenButton ButtonStyle="ButtonStyle.Primary"
                                      Text="Reverse & Create New"
                                      Disabled="@(Model.InvoiceReversalReason == InvoiceReversalReason.Unspecified)"
                                      class="ml-2"
                                      ButtonType="ButtonType.Submit"
                                      Click="@(_ => CreateNew = true)" />
                        <RadzenButton ButtonStyle="ButtonStyle.Light"
                                      Click="HandleCancel"
                                      Text="Cancel"
                                      class="ml-2"/>
                    </div>
                </div>
            </div>
        </div>
    </div>
</RadzenTemplateForm>
